(include kanata-cfg.kbd)
(include kanata-sequences.kbd)
(include kanata-vars.kbd)
(include kanata-aliases.kbd)
(include kanata-templates.kbd)

(defsrc
  esc  f1   f2   f3   f4   f5   f6   f7   f8   f9   f10  f11  f12  del  ins
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc pgup
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \    pgdn
  caps a    s    d    f    g    h    j    k    l    ;    '    ret       home
  lsft z    x    c    v    b    n    m    ,    .    /    rsft   up      end
  lctl lmet lalt           spc            ralt      rctl left   down    rght
)

(deflayermap (qwerty)
  rctrl _
  ralt _

  caps (fork (tap-hold-press $tt $ht bspc (layer-while-held extended-delete)) del (lsft rsft))
  bspc (fork (tap-hold-press $tt $ht bspc (layer-while-held extended-delete)) del (lsft rsft))

  grv @grv-ext
;;  (template-expand triple-tap-layer-switch grv transparent)

  tab @tab-ext

  a (tap-hold-release $tt $ht a lctl)
  s (tap-hold-release $tt $ht s lsft)
  d (tap-hold-release $tt $ht d lmet)
  f (tap-hold-release $tt $ht f lalt)

  j (tap-hold-release $tt $ht j ralt)
  k (tap-hold-release $tt $ht k rmet)
  l (tap-hold-release $tt $ht l rsft)
  ; (tap-hold-release $tt $ht ; rctl)

  spc @spc-ext
)

(deflayermap (norman)
  rctrl _
  ralt _

  caps (fork (tap-hold-press $tt $ht bspc (layer-while-held extended-delete)) del (lsft rsft))
  bspc (fork (tap-hold-press $tt $ht bspc (layer-while-held extended-delete)) del (lsft rsft))

  grv @grv-ext
;;  (template-expand triple-tap-layer-switch grv transparent)

  tab @tab-ext

  q q
  w w
  e d
  r f
  t k
  y j
  u u
  i r
  o l
  p ;
  [ [
  ] ]

  a (tap-hold-release $tt $ht a lctl)
  s (tap-hold-release $tt $ht s lsft)
  d (tap-hold-release $tt $ht e lmet)
  f (tap-hold-release $tt $ht t lalt)
  g g
  h y
  j (tap-hold-release $tt $ht n ralt)
  k (tap-hold-release $tt $ht i rmet)
  l (tap-hold-release $tt $ht o rsft)
  ; (tap-hold-release $tt $ht h rctl)
  ' '

  z z
  x x
  c c
  v v
  b b
  n p
  m m
  , ,
  . .
  / /
 
  spc @spc-ext
)

(deflayermap (jcuken)
  rctrl _
  ralt _

  caps (fork (tap-hold-press $tt $ht bspc (layer-while-held extended-delete)) del (lsft rsft))
  bspc (fork (tap-hold-press $tt $ht bspc (layer-while-held extended-delete)) del (lsft rsft))

  grv @grv-ext
;; (template-expand triple-tap-layer-switch grv transparent)

  tab @tab-ext

  q (switch ((and (layer qwerty) (input real q))) (ğŸ”£ Ğ¹) break
            ((and (layer norman) (input real q))) (ğŸ”£ Ğ¹) break)
  w (switch ((and (layer qwerty) (input real w))) (ğŸ”£ Ñ†) break
            ((and (layer norman) (input real w))) (ğŸ”£ Ñ†) break)
  e (switch ((and (layer qwerty) (input real e))) (ğŸ”£ Ñƒ) break
            ((and (layer norman) (input real d))) (ğŸ”£ Ğ²) break)
  r (switch ((and (layer qwerty) (input real r))) (ğŸ”£ Ğº) break
            ((and (layer norman) (input real f))) (ğŸ”£ Ğ°) break)
  t (switch ((and (layer qwerty) (input real t))) (ğŸ”£ Ğµ) break
            ((and (layer norman) (input real k))) (ğŸ”£ Ğ») break)
  y (switch ((and (layer qwerty) (input real y))) (ğŸ”£ Ğ½) break
            ((and (layer norman) (input real j))) (ğŸ”£ Ğ¾) break)
  u (switch ((and (layer qwerty) (input real u))) (ğŸ”£ Ğ³) break
            ((and (layer norman) (input real u))) (ğŸ”£ Ğ³) break)
  i (switch ((and (layer qwerty) (input real i))) (ğŸ”£ Ñˆ) break
            ((and (layer norman) (input real r))) (ğŸ”£ Ğº) break)
  o (switch ((and (layer qwerty) (input real o))) (ğŸ”£ Ñ‰) break
            ((and (layer norman) (input real l))) (ğŸ”£ Ğ´) break)
  p (switch ((and (layer qwerty) (input real p))) (ğŸ”£ Ğ·) break
            ((and (layer norman) (input real ;))) (ğŸ”£ Ğ¶) break)
  [ (switch ((and (layer qwerty) (input real [))) (ğŸ”£ Ñ…) break
            ((and (layer norman) (input real [))) (ğŸ”£ Ñ…) break)
  ] (switch ((and (layer qwerty) (input real ]))) (ğŸ”£ ÑŠ) break
            ((and (layer norman) (input real ]))) (ğŸ”£ ÑŠ) break)
  a (switch ((and (layer qwerty) (input real a))) (tap-hold-release $tt $ht (ğŸ”£ Ñ„) lctl) break
            ((and (layer norman) (input real a))) (ğŸ”£ Ñ„) break)
  s (switch ((and (layer qwerty) (input real s))) (tap-hold-release $tt $ht (ğŸ”£ Ñ‹) lsft) break
            ((and (layer norman) (input real s))) (ğŸ”£ Ñ‹) break)
  d (switch ((and (layer qwerty) (input real d))) (tap-hold-release $tt $ht (ğŸ”£ Ğ²) lmet) break
            ((and (layer norman) (input real e))) (ğŸ”£ Ñƒ) break)
  f (switch ((and (layer qwerty) (input real f))) (tap-hold-release $tt $ht (ğŸ”£ Ğ°) lalt) break
            ((and (layer norman) (input real t))) (ğŸ”£ Ğµ) break)
  g (switch ((and (layer qwerty) (input real g))) (ğŸ”£ Ğ¿) break
            ((and (layer norman) (input real g))) (ğŸ”£ Ğ¿) break)
  h (switch ((and (layer qwerty) (input real h))) (ğŸ”£ Ñ€) break
            ((and (layer norman) (input real y))) (ğŸ”£ Ğ½) break)
  j (switch ((and (layer qwerty) (input real j))) (tap-hold-release $tt $ht (ğŸ”£ Ğ¾) ralt) break
            ((and (layer norman) (input real n))) (ğŸ”£ Ñ‚) break)
  k (switch ((and (layer qwerty) (input real k))) (tap-hold-release $tt $ht (ğŸ”£ Ğ») rmet) break
            ((and (layer norman) (input real i))) (ğŸ”£ Ñˆ) break)
  l (switch ((and (layer qwerty) (input real l))) (tap-hold-release $tt $ht (ğŸ”£ Ğ´) rsft) break
            ((and (layer norman) (input real o))) (ğŸ”£ Ñ‰) break)
  ; (switch ((and (layer qwerty) (input real ;))) (tap-hold-release $tt $ht (ğŸ”£ Ğ¶) rctl) break
            ((and (layer norman) (input real h))) (ğŸ”£ Ñ€) break)
  ' (switch ((and (layer qwerty) (input real '))) (ğŸ”£ Ñ) break
            ((and (layer norman) (input real '))) (ğŸ”£ Ñ) break)
  z (switch ((and (layer qwerty) (input real z))) (ğŸ”£ Ñ) break
            ((and (layer norman) (input real z))) (ğŸ”£ Ñ) break)
  x (switch ((and (layer qwerty) (input real x))) (ğŸ”£ Ñ‡) break
            ((and (layer norman) (input real x))) (ğŸ”£ Ñ‡) break)
  c (switch ((and (layer qwerty) (input real c))) (ğŸ”£ Ñ) break
            ((and (layer norman) (input real c))) (ğŸ”£ Ñ) break)
  v (switch ((and (layer qwerty) (input real v))) (ğŸ”£ Ğ¼) break
            ((and (layer norman) (input real v))) (ğŸ”£ Ğ¼) break)
  b (switch ((and (layer qwerty) (input real b))) (ğŸ”£ Ğ¸) break
            ((and (layer norman) (input real b))) (ğŸ”£ Ğ¸) break)
  n (switch ((and (layer qwerty) (input real n))) (ğŸ”£ Ñ‚) break
            ((and (layer norman) (input real p))) (ğŸ”£ Ğ·) break)
  m (switch ((and (layer qwerty) (input real m))) (ğŸ”£ ÑŒ) break
            ((and (layer norman) (input real m))) (ğŸ”£ ÑŒ) break)
  , (switch ((and (layer qwerty) (input real ,))) (ğŸ”£ Ğ±) break
            ((and (layer norman) (input real ,))) (ğŸ”£ Ğ±) break)
  . (switch ((and (layer qwerty) (input real .))) (ğŸ”£ Ñ) break
            ((and (layer norman) (input real .))) (ğŸ”£ Ñ) break)
  / (switch ((and (layer qwerty) (input real /))) (ğŸ”£ .) break
            ((and (layer norman) (input real /))) (ğŸ”£ .) break)

  spc @spc-ext
)

(deflayermap (leonov)
  rctrl _
  ralt _

  caps (fork (tap-hold-press $tt $ht bspc (layer-while-held extended-delete)) del (lsft rsft))
  bspc (fork (tap-hold-press $tt $ht bspc (layer-while-held extended-delete)) del (lsft rsft))

  grv @grv-ext
;;  (template-expand triple-tap-layer-switch grv transparent)

  tab @tab-ext

  q (switch ((and (layer qwerty) (input real q))) (ğŸ”£ Ñ‰) break
            ((and (layer norman) (input real q))) (ğŸ”£ Ñ‰) break)
  w (switch ((and (layer qwerty) (input real w))) (ğŸ”£ Ñ†) break
            ((and (layer norman) (input real w))) (ğŸ”£ Ñ†) break)
  e (switch ((and (layer qwerty) (input real e))) (ğŸ”£ Ğº) break
            ((and (layer norman) (input real d))) (ğŸ”£ Ğº) break)
  r (switch ((and (layer qwerty) (input real r))) (ğŸ”£ Ğ») break
            ((and (layer norman) (input real f))) (ğŸ”£ Ğ») break)
  t (switch ((and (layer qwerty) (input real t))) (ğŸ”£ Ğ±) break
            ((and (layer norman) (input real k))) (ğŸ”£ Ğ±) break)
  y (switch ((and (layer qwerty) (input real y))) (ğŸ”£ Ğ¹) break
            ((and (layer norman) (input real j))) (ğŸ”£ Ğ¹) break)
  u (switch ((and (layer qwerty) (input real u))) (ğŸ”£ ÑŠ) break
            ((and (layer norman) (input real u))) (ğŸ”£ ÑŠ) break)
  i (switch ((and (layer qwerty) (input real i))) (ğŸ”£ Ñ‹) break
            ((and (layer norman) (input real r))) (ğŸ”£ Ñ‹) break)
  o (switch ((and (layer qwerty) (input real o))) (ğŸ”£ Ñ) break
            ((and (layer norman) (input real l))) (ğŸ”£ Ñ) break)
  p (switch ((and (layer qwerty) (input real p))) (ğŸ”£ Ñ) break
            ((and (layer norman) (input real ;))) (ğŸ”£ Ñ) break)
  [ (switch ((and (layer qwerty) (input real [))) (ğŸ”£ Ñ„) break
            ((and (layer norman) (input real [))) (ğŸ”£ Ñ„) break)
  ] (switch ((and (layer qwerty) (input real ]))) (ğŸ”£ .) break
            ((and (layer norman) (input real ]))) (ğŸ”£ .) break)
  a (switch ((and (layer qwerty) (input real a))) (tap-hold-release $tt $ht (ğŸ”£ Ñ‡) lctl) break
            ((and (layer norman) (input real a))) (ğŸ”£ Ñ‡) break)
  s (switch ((and (layer qwerty) (input real s))) (tap-hold-release $tt $ht (ğŸ”£ Ğ·) lsft) break
            ((and (layer norman) (input real s))) (ğŸ”£ Ğ·) break)
  d (switch ((and (layer qwerty) (input real d))) (tap-hold-release $tt $ht (ğŸ”£ Ğ²) lmet) break
            ((and (layer norman) (input real e))) (ğŸ”£ Ğ²) break)
  f (switch ((and (layer qwerty) (input real f))) (tap-hold-release $tt $ht (ğŸ”£ Ğ½) lalt) break
            ((and (layer norman) (input real t))) (ğŸ”£ Ğ½) break)
  g (switch ((and (layer qwerty) (input real g))) (ğŸ”£ Ñ‚) break
            ((and (layer norman) (input real g))) (ğŸ”£ Ñ‚) break)
  h (switch ((and (layer qwerty) (input real h))) (ğŸ”£ Ğ´) break
            ((and (layer norman) (input real y))) (ğŸ”£ Ğ´) break)
  j (switch ((and (layer qwerty) (input real j))) (tap-hold-release $tt $ht (ğŸ”£ Ğ¸) ralt) break
            ((and (layer norman) (input real n))) (ğŸ”£ Ğ¸) break)
  k (switch ((and (layer qwerty) (input real k))) (tap-hold-release $tt $ht (ğŸ”£ Ğ°) rmet) break
            ((and (layer norman) (input real i))) (ğŸ”£ Ğ°) break)
  l (switch ((and (layer qwerty) (input real l))) (tap-hold-release $tt $ht (ğŸ”£ Ğ¾) rsft) break
            ((and (layer norman) (input real o))) (ğŸ”£ Ğ¾) break)
  ; (switch ((and (layer qwerty) (input real ;))) (tap-hold-release $tt $ht (ğŸ”£ Ğµ) rctl) break
            ((and (layer norman) (input real h))) (ğŸ”£ Ğµ) break)
  ' (switch ((and (layer qwerty) (input real '))) (ğŸ”£ Ñ) break
            ((and (layer norman) (input real '))) (ğŸ”£ Ñ) break)
  z (switch ((and (layer qwerty) (input real z))) (ğŸ”£ Ğ¶) break
            ((and (layer norman) (input real z))) (ğŸ”£ Ğ¶) break)
  x (switch ((and (layer qwerty) (input real x))) (ğŸ”£ Ñ…) break
            ((and (layer norman) (input real x))) (ğŸ”£ Ñ…) break)
  c (switch ((and (layer qwerty) (input real c))) (ğŸ”£ Ğ¿) break
            ((and (layer norman) (input real c))) (ğŸ”£ Ğ¿) break)
  v (switch ((and (layer qwerty) (input real v))) (ğŸ”£ Ñ€) break
            ((and (layer norman) (input real v))) (ğŸ”£ Ñ€) break)
  b (switch ((and (layer qwerty) (input real b))) (ğŸ”£ Ğ¼) break
            ((and (layer norman) (input real b))) (ğŸ”£ Ğ¼) break)
  n (switch ((and (layer qwerty) (input real n))) (ğŸ”£ Ğ³) break
            ((and (layer norman) (input real p))) (ğŸ”£ Ğ³) break)
  m (switch ((and (layer qwerty) (input real m))) (ğŸ”£ Ñ‘) break
            ((and (layer norman) (input real m))) (ğŸ”£ Ñ‘) break)
  , (switch ((and (layer qwerty) (input real ,))) (ğŸ”£ ÑŒ) break
            ((and (layer norman) (input real ,))) (ğŸ”£ ÑŒ) break)
  . (switch ((and (layer qwerty) (input real .))) (ğŸ”£ Ñƒ) break
            ((and (layer norman) (input real .))) (ğŸ”£ Ñƒ) break)
  / (switch ((and (layer qwerty) (input real /))) (ğŸ”£ Ñ) break
            ((and (layer norman) (input real /))) (ğŸ”£ Ñ) break)

  spc @spc-ext
)

(deflayermap (transparent)
  grv @grv-ext
;;  (template-expand triple-tap-layer-switch grv norman)
)

(deflayermap (extended)
  grv @grv-ext
  caps caps
  / sldr
  \ lrld
  i pgdn
  o pgup
  q esc
  k up
  h left
  j down
  l rght
  b C-left
  w C-rght
  , C-S-tab ;; previous tab
  . C-tab ;; next tab
  n home
  m end
  v C-v ;; paste
  c C-c ;; yank/copy
  z C-z ;; undo
  y C-y ;; redo
  x C-x ;; cut
)

(deflayermap (extended-delete)
  w @dac
  b @dbc
)

(deflayermap (grv-layout-switch)
  q (layer-switch transparent)
  w (layer-switch extended)
  1 (layer-switch qwerty)
  2 (layer-switch norman)
  3 (layer-switch jcuken)
  4 (layer-switch leonov)
  5 (layer-switch numpad)
)

(deflayer (numpad)
  esc      f1   f2   f3   f4        f5        f6   f7   f8   f9   f10  f11  f12  del  ins
  @grv-ext 1    2    3    (ğŸ”£ *)   (ğŸ”£ ^)    â€¢    â€¢    â€¢    â€¢    â€¢    â€¢    â€¢    bspc pgup
  tab      4    5    6    /         â€¢         â€¢    â€¢    â€¢    â€¢    â€¢    â€¢    â€¢    â€¢    pgdn 
  caps     7    8    9    +         â€¢         â€¢    â€¢    â€¢    â€¢    â€¢    â€¢    ret       home
  lsft     0    .    ,    -         â€¢         â€¢    â€¢    â€¢    â€¢    â€¢    rsft   up      end
  lctl lmet lalt                spc                 ralt      rctl left   down    rght
)
